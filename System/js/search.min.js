var searchListLi=$(".search-list li"),searchList=$(".search-list"),searchSm=$(".search-sm"),searchBoxSm=$(".search-input-sm .search-box-sm"),searchListSm=$(".search-list-sm");$(function(){"use strict";$(".header-search-input").focus(function(){$(this).parent("div").addClass("header-search-wrapper-focus")}).blur(function(){$(this).parent("div").removeClass("header-search-wrapper-focus")});$(".search-button").click(function(e){if(searchSm.is(":hidden")){searchSm.show();searchBoxSm.focus()}else{searchSm.hide();searchBoxSm.val("")}});$(".search-input-sm").on("click",function(){searchBoxSm.focus()});$(".search-sm-close").click(function(e){searchSm.hide();searchBoxSm.val("")});if($(".search-list").length>0){var ps_search_nav=new PerfectScrollbar(".search-list",{wheelSpeed:2,wheelPropagation:false,minScrollbarLength:20})}if(searchListSm.length>0){var ps_search2_nav=new PerfectScrollbar(".search-list-sm",{wheelSpeed:2,wheelPropagation:false,minScrollbarLength:20})}$(".search-sm-close").on("click",function(){searchBoxSm.val("");searchBoxSm.blur();searchListLi.remove();searchList.addClass("display-none");if(contentOverlay.hasClass("show")){contentOverlay.removeClass("show")}});contentOverlay.on("click",function(){searchListLi.remove();contentOverlay.removeClass("show");searchSm.hide();searchBoxSm.val("");searchList.addClass("display-none");$(".search-input-sm .search-box-sm, .header-search-input").val("")});var renderResults=function(results){if(results.length>0){results.sort();searchList.empty();Array.prototype.forEach.call(results,function(result,index){if(index===0){var activeItemClass="current_item"}else{var activeItemClass=""}var item=$('<li class="auto-suggestion '+activeItemClass+'">'+'<a class="collection-item truncate" href='+result[1]+">"+'<div class="display-flex">'+'<div class="display-flex align-item-center flex-grow-1">'+'<div class="member-info display-flex flex-column">'+'<span class="black-text">'+result[0][0]+"</span>"+'<small class="grey-text">'+result[0][1]+"</small>"+"</div>"+"</div>"+"</div>"+"</a>"+"</li>");searchList.append(item)})}else{if(contentOverlay.hasClass("show")){contentOverlay.removeClass("show");searchList.addClass("display-none")}}};var debounce=function(fn){var timeout;return function(){var args=Array.prototype.slice.call(arguments),ctx=this;clearTimeout(timeout);timeout=setTimeout(function(){fn.apply(ctx,args)},100)}};$(".header-search-wrapper .header-search-input, .search-input-sm .search-box-sm").on("keyup",debounce(function(e){contentOverlay.addClass("show");searchList.removeClass("display-none");var $this=$(this);if(e.keyCode!==38&&e.keyCode!==40&&e.keyCode!==13){if(e.keyCode==27){contentOverlay.removeClass("show");$this.val("");$this.blur()}var value=$(this).val().toLowerCase(),liList=$("ul.search-list li");liList.remove();if(value!=""){var results=window.index.search(value).map(function(result){return[window.products[result.ref],result.ref]});renderResults(results)}else{if(contentOverlay.hasClass("show")){contentOverlay.removeClass("show");searchList.addClass("display-none")}}}if($(".header-search-wrapper .current_item").length){searchList.scrollTop(0);searchList.scrollTop($(".search-list .current_item:first").offset().top-searchList.height())}if($(".search-input-sm .current_item").length){searchListSm.scrollTop(0);searchListSm.scrollTop($(".search-list-sm .current_item:first").offset().top-searchListSm.height())}}));$("#navbarForm").on("submit",function(e){e.preventDefault()});$(window).on("keydown",function(e){var $current=$(".search-list li.current_item"),$next,$prev;if(e.keyCode===40){$next=$current.next();if($next[0]!=="undefined"&&$next[0].tagName==="LI"){$current.removeClass("current_item");$current=$next.addClass("current_item")}}else if(e.keyCode===38){$prev=$current.prev();if($prev.length!==0){$current.removeClass("current_item");$current=$prev.addClass("current_item")}}if(e.keyCode===13&&$(".search-list li.current_item").length>0){var selected_item=$("li.current_item a");window.location=$("li.current_item a").attr("href");$(selected_item).trigger("click")}});searchList.mouseenter(function(){if($(".search-list").length>0){ps_search_nav.update()}if(searchListSm.length>0){ps_search2_nav.update()}});$(document).on("mouseenter",".search-list li",function(e){$(this).siblings().removeClass("current_item");$(this).addClass("current_item")});$(document).on("click",".search-list li",function(e){e.stopPropagation()})});$(window).on("resize",function(){if($(window).width()<992){$(".header-search-input").val("");$(".header-search-input").closest(".search-list li").remove()}if($(window).width()>993){searchSm.hide();searchBoxSm.val("");$(".search-input-sm .search-box-sm").val("")}});